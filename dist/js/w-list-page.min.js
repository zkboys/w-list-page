function listPage(e){function a(){var e=$(window).height(),a=$(".tool-bar-bottom").outerHeight();d.height(e-d.offset().top-a-3)}function t(a){a||(a={});var t=$(".search-bar form").serializeArray(),n=$(this);return n.hasClass("disabled")?!1:void $.ajax({method:"GET",dataType:"json",data:t,url:e.url,beforeSend:function(e){$.showPreloader(),n.addClass("disabled"),a.beforeSend&&a.beforeSend(e)},success:function(t,n){a.success&&a.success(t,n),"simple"==e.paginationType&&(e.data.prevCursor=t.prev_cursor,e.data.nextCursor=t.next_cursor,o.find("input[name=next_cursor]").length?e.data.currentPage++:o.find("input[name=pre_cursor]").length?e.data.currentPage--:e.data.currentPage=1),"complex"==e.paginationType&&(e.data.currentPage=t.current_page,e.data.totalPage=t.total_page,u.wPage("setCurrentPage",e.data.currentPage),u.wPage("setTotalPage",e.data.totalPage)),o.find("input[name=current_page]").val(e.data.currentPage);var r=e.data.pageSize*(e.data.currentPage-1)+1;d.wTable("load",t[e.ajaxDataField],r)},error:function(e){alert(e.status+"："+e.statusText)},complete:function(t,r){if($.hidePreloader(),n.removeClass("disabled"),"simple"==e.paginationType){var i=o.find("input[name=prev_cursor]"),d=o.find("input[name=next_cursor]");i.length&&i.val()?g.removeClass("disabled"):g.addClass("disabled"),d.length&&d.val()?v.removeClass("disabled"):v.addClass("disabled")}a.complete&&a.complete(t,r)}})}var n={submitBtn:"#submit",paginationType:"complex",url:"",tableWrap:".table-wrap",ajaxDataField:"table_data"},r={prevCursor:0,nextCursor:0,currentPage:1,pageSize:10,tableData:[]},i={currentPage:1,totalPage:0,pageSize:10,tableData:[]};e=$.extend({},n,e);var d=$(e.tableWrap),l=$(e.submitBtn),o=$(".search-bar form"),s=$(".tool-bar-bottom");if("prevCursor"in e.data||"nextCursor"in e.data?(e.paginationType="simple",e.data=$.extend({},r,e.data)):(e.paginationType="complex",e.data=$.extend({},i,e.data)),o.append('<input type="hidden" name ="current_page" value = "'+e.data.currentPage+'"/>'),"complex"==e.paginationType){s.append('<div class="clear"></div>');var u=$('<div class="pull-left"></div>');s.prepend(u),e.totalPage=e.data.totalPage,e.currentPage=e.data.currentPage,e.clickCallBack=function(e,a){o.find("input[name=current_page]").val(e),t.call(a)},u.wPage(e)}else if("simple"==e.paginationType){var p=e.data.prevCursor?"":"disabled",c=e.data.nextCursor?"":"disabled",g=$('<div class="btn btn-default btn-ms pre '+p+'">上一页</div>'),v=$('<div class="btn btn-default btn-ms next '+c+'">下一页</div>');s.prepend(v),s.prepend(g),g.on("click",function(){o.find("input[name=next_cursor]").remove();var a=o.find("input[name=prev_cursor]");a.length||(a=$('<input type="hidden" name="prev_cursor" value="'+e.data.prevCursor+'"/>'),o.append(a)),t.call(this)}),v.on("click",function(){o.find("input[name=prev_cursor]").remove();var a=o.find("input[name=next_cursor]");a.length||(a=$('<input type="hidden" name="next_cursor" value="'+e.data.nextCursor+'"/>'),o.append(a)),t.call(this)})}else s.append('<div class="clear"></div>');return a(),e.tableData=e.data.tableData,$(".table-wrap").wTable(e),$(window).on("resize",function(){a()}),l.not(".disabled").on("click",function(){o.find("input[name=current_page]").val(1),o.find("input[name=prev_cursor]").remove(),o.find("input[name=next_cursor]").remove(),t.call(this)}),o.find("input").on("keydown",function(e){return 13==e.keyCode?(l.trigger("click"),!1):void 0}),d}