function listPage(e){function a(){var e=$(window).height(),a=$(".tool-bar-bottom").outerHeight();i.height(e-i.offset().top-a-3)}function n(a){a||(a={});var n=$(".search-bar form").serializeArray(),t=$(this);$.ajax({method:"GET",dataType:"json",data:n,url:e.url,beforeSend:function(e){$.showPreloader(),t.addClass("disabled"),a.beforeSend&&a.beforeSend(e)},success:function(n,t){if(a.success&&a.success(n,t),"simple"==e.paginationType){d.val(n.pre_cursor),p.val(n.next_cursor);var l=$("input[name=mark]").val(),s=r.find("input[name=current_page]"),c=s.val();"next"==l?s.val(++c):"pre"==l&&s.val(--c)}"complex"==e.paginationType&&(o.wPage("setCurrentPage",n.current_page),o.wPage("setTotalPage",n.total_page));var u=e.pageSize*($("input[name=current_page]").val()-1)+1;i.wTable("load",n[e.ajaxDataField],u)},error:function(e){alert(e.status+"："+e.statusText)},complete:function(n,i){if($.hidePreloader(),t.removeClass("disabled"),"simple"==e.paginationType){var l=$("input[name=pre_cursor]").val(),r=$("input[name=next_cursor]").val();0==l?v.addClass("disabled"):v.removeClass("disabled"),0==r?m.addClass("disabled"):m.removeClass("disabled")}a.complete&&a.complete(n,i)}})}var t={submitBtn:"#submit",paginationType:"complex",url:"",tableWrap:".table-wrap",ajaxDataField:"table_data",totalPage:$("input[name=total_page]").val(),pageSize:10};e=$.extend({},t,e);var i=$(e.tableWrap),l=$(e.submitBtn),r=$(".search-bar form"),s=$(".tool-bar-bottom");if(r.append('<input type="hidden" name ="current_page" value = "1"/>'),"complex"==e.paginationType){s.append('<div class="clear"></div>');var o=$('<div class="pull-left"></div>');s.prepend(o),e.clickCallBack=function(e,a){r.find("input[name=current_page]").val(e),n.call(a,{beforeSend:function(){},success:function(){},complete:function(){}})},o.wPage(e)}else if("simple"==e.paginationType){var d=$("input[name=pre_cursor]"),p=$("input[name=next_cursor]"),c=0==d.val()?"disabled":"",u=0==p.val()?"disabled":"",v=$('<div class="btn btn-default btn-ms pre '+c+'">上一页</div>'),m=$('<div class="btn btn-default btn-ms next '+u+'">下一页</div>');s.prepend(m),s.prepend(v),v.on("click",function(){return $(this).hasClass("disabled")?!1:($("input[name=mark]").val("pre"),void n.call(this))}),m.on("click",function(){return $(this).hasClass("disabled")?!1:($("input[name=mark]").val("next"),void n.call(this))})}else s.append('<div class="clear"></div>');return a(),$(".table-wrap").wTable(e),$(window).on("resize",function(){a()}),l.not(".disabled").on("click",function(){r.find("input[name=current_page]").val(1),r.find("input[name=pre_cursor]").val(0),r.find("input[name=next_cursor]").val(0),r.find("input[name=mark]").val("search"),n.call(this)}),r.find("input").on("keydown",function(e){return 13==e.keyCode?(l.trigger("click"),!1):void 0}),i}